# スポチャン家練アプリ

スポーツチャンバラ家練用の「不定期クラップ音＝相手攻撃合図」トレーニングアプリです。

## 特徴

- 📱 iPhone Safari 対応（Web Audio API 使用）
- ⏱️ 3 秒カウントダウン → レッスン開始
- 🔊 不定期クラップ音（3〜5 秒間隔のランダム）
- 📹 YouTube 動画埋め込み（令剣会のショート動画）
- ⏰ ドリフトしないタイマー（performance.now()ベース）

### 🎨 UX 心理学を活用した設計

[UX 心理学のベストプラクティス](https://www.shokasonjuku.com/ux-psychology)を参考に、以下の原則を実装：

1. **目標勾配効果** - 進捗バーで達成感を視覚化
2. **ユーザー歓喜効果** - レッスン完了時のお祝い演出
3. **フィードバックループ** - 音が鳴るときの視覚的合図（👏 パルスエフェクト）
4. **ゲーミフィケーション** - 統計カードで達成感を強化
5. **視覚的階層** - 重要な情報（残り時間、状態）を強調表示
6. **プログレッシブディスクロージャー** - 初回訪問時のみガイドを表示
7. **美的ユーザビリティ効果** - グラデーション、アニメーション、洗練されたデザイン

## セットアップ

### 1. パッケージのインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開きます。

### 3. 本番ビルド

```bash
npm run build
npm start
```

## 静的配布（Static Export）

静的 HTML として配布する場合：

### 1. next.config.js を編集

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: "export",
};

module.exports = nextConfig;
```

### 2. ビルドと配布

```bash
npm run build
```

`out/` ディレクトリに静的ファイルが生成されます。これを Web サーバーにアップロードするか、GitHub Pages などで公開できます。

## メニュー一覧（全 30 メニュー / 6 カテゴリ）

### 📚 基礎練習（4 メニュー）

- 基本構え〜打突
- 踏み込み練習
- 間合い感覚
- 防御姿勢〜ガード

### 🦵 足打ち練習（5 メニュー）

- 扇足 交互打ち
- 1 足 交互打ち
- 1 足のガード
- 足払い → 足打ち
- 左右足打ち切替

### ✋ 小手練習（4 メニュー）

- 基本小手打ち
- 扇小手 連続
- 小手 → 面 コンビネーション
- 返し小手

### 🎭 フェイント練習（5 メニュー）

- 抑え面フェイント → 扇小手
- 踏み込み後に軌道を変える
- 足フェイント → 面
- 左右フェイント
- タメからの急攻撃

### ⚡ 連打練習（5 メニュー）

- 面連打
- 小手連打
- 足連打
- 面 → 小手 → 足 連続
- スピード連打（60 秒）

### 🏆 応用・総合（5 メニュー）

- 抑え面からのカウンター
- 間合いを詰めての連続攻撃
- 受け → 返し → 連打
- 試合想定 総合練習（120 秒）
- 仕上げテスト（60 秒）

## カテゴリ別の練習ガイド

### 📚 基礎練習

スポーツチャンバラの基本動作を習得するカテゴリ。初心者はまずここから始めましょう。
正しい構え、打突、間合い、防御の基礎を身につけます。

### 🦵 足打ち練習

下段への攻撃を集中的に練習。姿勢を崩さず、素早く正確に足を狙う技術を習得。
扇足、1 足など様々なバリエーションを習得します。

### ✋ 小手練習

手首のスナップを活かした小手打ちを習得。小手単体だけでなく、
面や足との連携技も練習します。

### 🎭 フェイント練習

相手を惑わすフェイント技術を習得。小さな動きで相手を誘導し、
素早く本命の攻撃へ切り替える技術を磨きます。

### ⚡ 連打練習

連続攻撃のスピードと持続力を鍛えます。体力とテクニックの両方が求められる
高強度トレーニングです。

### 🏆 応用・総合

複数の技術を組み合わせた実戦的な練習。試合を想定した総合的な
トレーニングで、学んだ技術を統合します。

## YouTube 動画 ID の変更方法

`lib/menus.ts` ファイルの `youtubeVideoId` を編集してください。

```typescript
{
  id: "basic-1",
  title: "基本構え〜打突",
  category: "基礎練習",
  durationSec: 90,
  youtubeVideoId: "YOUR_VIDEO_ID", // ←ここを変更
  description: "...",
}
```

**令剣会の YouTube チャンネル**: https://www.youtube.com/@reikenkai/shorts

## 既知の制約

- **iPhone 画面ロック**: iOS では画面ロック中にタイマーが停止する可能性があります（Safari 仕様）
- **自動再生制限**: 音声は Start 押下後のユーザー操作を起点に再生されます（Safari 制限）
- **バックグラウンド動作**: アプリを別タブに切り替えると、ブラウザによってはタイマーの精度が低下する場合があります

## ファイル構成

```
spochan/
├── app/
│   ├── layout.tsx          # ルートレイアウト
│   ├── page.tsx            # トップページ（メニュー一覧）
│   ├── globals.css         # グローバルスタイル
│   └── menu/
│       └── [id]/
│           └── page.tsx    # メニュー詳細ページ
├── components/
│   ├── MenuCard.tsx        # メニューカードコンポーネント
│   └── LessonPlayer.tsx    # レッスンプレイヤー（音・タイマー・UI）
├── lib/
│   ├── menus.ts            # メニューデータ定義
│   └── audio.ts            # Web Audio API（クラップ音合成）
├── package.json
├── next.config.js
└── tsconfig.json
```

## 技術スタック

- **Next.js 15** (App Router)
- **React 19**
- **TypeScript**
- **Web Audio API** (クラップ音合成)
- **CSS** (CSS Modules)

## ライセンス

Private use only.
